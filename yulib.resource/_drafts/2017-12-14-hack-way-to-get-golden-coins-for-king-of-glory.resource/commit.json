{"compress":true,"commitItems":[["942b8595-027f-4ecd-ab74-e499bf2e8603",1513741571030,"---\ntitle: 教你使用50行Python代码刷王者荣耀金币\ncategories: [Tech]\ntags: [adb,android,python,kog,game]\ndate: 2017-12-14\n---\n\n## 原理\n\n王者荣耀的冒险模式里有个挑战模式，第一次过关可以获得比较多的金币，后面重新挑战还是会获得少量金币，这不算是bug，只有你不嫌烦手动蛮力也可以刷金币。\n\n> 推荐关卡：陨落的废都 - 魔女回忆\n\n此关卡使用纯输出英雄21秒左右可以打BOSS，50秒左右可以通关，每次重复通关可以获得奖励19金币。在使用脚本刷金币钱建议你手动通关体验一下。此为游戏原理。\n\n简单来说，需要执行以下步骤：\n\n1. 界面打开至挑战关卡：陨落的废都 - 魔女回忆 【点击下一步】\n2. 进入阵容调整界面，提前安排好阵容。【点击闯关】\n3. 进入挑战界面。【点击右上角-自动-等待挑战结束】\n4. 进入挑战完成界面。【点击屏幕继续】\n5. 进入关卡奖励界面。【点击再次挑战】\n6. 进入阵容调整界面，循环至步骤1或步骤2【貌似取决于游戏区和版本】\n\n只要你能模拟屏幕点击就可以完成刷金币的脚本，在安卓模拟界面点击最简单的方式就是使用ADB发送命令，不需要root手机，不需要安装第三方软件，方便快捷。ADB命令点击屏幕坐标[x, y] 可以使用命令：\n\n```\nadb shell input tap x y\n```\n\nIOS 是否有类似工具和命令，我不清楚，如果有那么实现自动刷金币也很简单。\n\n## 准备\n\n- 本脚本适用于安卓游戏区，需要真实安卓手机。\n- 手机需开启USB调试模式，允许电脑调试。\n- 电脑需安装好安卓驱动，一般豌豆荚或者各种管家就可以自动帮你装好。\n- 电脑需要有ADB工具集，很多方式可以获取。\n- ADB工具需要加入环境变量PATH中，方便随时调用。\n- 电脑上需要安装Python，因为这是我选择的脚本语言。\n\n专业的开发测试人员，也可以参考我的两篇博客：\n\n- [在 Windows 下搭建 Appium + Android 自动化测试环境](https://betacat.online/posts/2017-05-03/setup-appium-automation-test-environment/)\n- [在Mac OSX 上配置Appium+Android自动化测试环境](https://betacat.online/posts/2017-12-10/setup-appium-test-environment-on-mac-osx/)\n\n如果只是为了刷金币，只需要安装好驱动和ADB工具即可。\n\n## 步骤\n\n如果万事具备，那么步骤就非常简单。\n\n1. 用USB连接手机，如果弹出警告，请允许电脑调试手机。\n2. 使用命令 `adb devices` 检验adb和手机状态已经就绪。\n3. 将游戏打开，挑战到挑战模式，魔女回忆，阵容调整界面。\n4. 根据手机性能和分辨率，调整`kog.py`中的各个参数和刷金次数。\n5. 运行刷金币命令，手机上可以实时查看到效果。\n\n```\npython kog.py\n```\n\n注意：\n\n1. 每周金币上限4200，不建议一次刷满，因为一会被提醒休息，二有可能因为各种原因被打断。\n2. 铭文，手机性能，英雄选择都会影响通关速度，自己斟酌。\n\n## 声明\n\n本脚本纯属娱乐和平时探索的心得，如果因为违反了游戏规则导致被封号，我概不负责。\n\n",[[1513741542849,["toby.qin@CNSHHQ-0435",[[-1,226,"1"]],[227,227],[226,226]]],[1513741543249,["toby.qin@CNSHHQ-0435",[[1,226,"0"]],[226,226],[227,227]]],[1513741552367,["toby.qin@CNSHHQ-0435",[[-1,273,"钱"]],[274,274],[273,273]]],[1513741554477,["toby.qin@CNSHHQ-0435",[[1,273,"前"]],[273,273],[274,274]]],[1513741559136,["toby.qin@CNSHHQ-0435",[[-1,266,"使用脚本刷金币"]],[273,273],[266,266]]],[1513741561596,["toby.qin@CNSHHQ-0435",[[1,266,"开刷"]],[266,266],[268,268]]],[1513741562016,["toby.qin@CNSHHQ-0435",[[-1,267,"刷"]],[268,268],[267,267]]],[1513741563053,["toby.qin@CNSHHQ-0435",[[1,267,"挂"]],[267,267],[268,268]]],[1513741614079,["toby.qin@CNSHHQ-0435",[[-1,726,"就"]],[727,727],[726,726]]],[1513741684264,["toby.qin@CNSHHQ-0435",[[-1,1224,"挑战"]],[1226,1226],[1224,1224]]],[1513741688189,["toby.qin@CNSHHQ-0435",[[1,1224,"跳转"]],[1224,1224],[1226,1226]]],[1513741693588,["toby.qin@CNSHHQ-0435",[[-1,1224,"跳转"]],[1226,1226],[1224,1224]]],[1513741695557,["toby.qin@CNSHHQ-0435",[[1,1224,"调整"]],[1224,1224],[1226,1226]]],[1513741705744,["toby.qin@CNSHHQ-0435",[[-1,1224,"调整到"]],[1226,1226],[1224,1224]]],[1513741707035,["toby.qin@CNSHHQ-0435",[[1,1224,"进入"]],[1224,1224],[1226,1226]]],[1513741796504,["toby.qin@CNSHHQ-0435",[[1,1215,"\n"]],[1214,1214],[1215,1215]]],[1513741802019,["toby.qin@CNSHHQ-0435",[[1,1215,"  + 如果"]],[1215,1215],[1221,1221]]],[1513741812048,["toby.qin@CNSHHQ-0435",[[-1,1219,"如果"]],[1221,1221],[1219,1219]]],[1513741813547,["toby.qin@CNSHHQ-0435",[[1,1219,"输入"]],[1219,1219],[1221,1221]]],[1513741814064,["toby.qin@CNSHHQ-0435",[[-1,1219,"输入"]],[1221,1221],[1219,1219]]],[1513741815691,["toby.qin@CNSHHQ-0435",[[1,1219,"政策"]],[1219,1219],[1221,1221]]],[1513741816320,["toby.qin@CNSHHQ-0435",[[-1,1219,"政策"]],[1221,1221],[1219,1219]]],[1513741819387,["toby.qin@CNSHHQ-0435",[[1,1219,"正常返回"]],[1219,1219],[1223,1223]]],[1513741827640,["toby.qin@CNSHHQ-0435",[[-1,1219,"正常返回"]],[1223,1223],[1219,1219]]],[1513741830005,["toby.qin@CNSHHQ-0435",[[1,1219,"以前真"]],[1219,1219],[1222,1222]]],[1513741830608,["toby.qin@CNSHHQ-0435",[[-1,1219,"以前真"]],[1222,1222],[1219,1219]]],[1513741834180,["toby.qin@CNSHHQ-0435",[[1,1219,"一切正常"]],[1219,1219],[1223,1223]]],[1513741846121,["toby.qin@CNSHHQ-0435",[[-1,1215,"  + 一切正常"]],[1223,1223],[1215,1215]]],[1513741881489,["toby.qin@CNSHHQ-0435",[[1,1147,"\n"]],[1146,1146],[1147,1147]]],[1513741885268,["toby.qin@CNSHHQ-0435",[[1,1147,"### 环境"]],[1147,1147],[1153,1153]]],[1513741887360,["toby.qin@CNSHHQ-0435",[[-1,1151,"环境"]],[1153,1153],[1151,1151]]],[1513741893029,["toby.qin@CNSHHQ-0435",[[1,1151,"环境监测"]],[1151,1151],[1155,1155]]],[1513741893825,["toby.qin@CNSHHQ-0435",[[-1,1153,"监测"]],[1155,1155],[1153,1153]]],[1513741895524,["toby.qin@CNSHHQ-0435",[[1,1153,"检测"]],[1153,1153],[1155,1155]]],[1513741898337,["toby.qin@CNSHHQ-0435",[[1,1225,"\n"]],[1224,1224],[1225,1225]]],[1513741899200,["toby.qin@CNSHHQ-0435",[[1,1226,"\n"]],[1224,1224],[1225,1225]]],[1513741900634,["toby.qin@CNSHHQ-0435",[[1,1225,"```"]],[1225,1225],[1228,1228]]],[1513741901410,["toby.qin@CNSHHQ-0435",[[1,1230,"\n"]],[1228,1228],[1229,1229]]],[1513741902227,["toby.qin@CNSHHQ-0435",[[1,1229,"```"]],[1229,1229],[1232,1232]]],[1513741903465,["toby.qin@CNSHHQ-0435",[[1,1229,"\n"]],[1228,1228],[1229,1229]]],[1513741924986,["toby.qin@CNSHHQ-0435",[[1,1229,"λ adb devices\r\nList of devices attached\r\nb76e19e4        device"]],[1229,1229],[1292,1292]]],[1513741933114,["toby.qin@CNSHHQ-0435",[[-1,1242,"\r"],[-1,1268,"\r"],[-1,1271,"76e19e"],[1,1277,"******"]],[1269,1275],[1275,1275]]],[1513741936747,["toby.qin@CNSHHQ-0435",[[-1,1229,"λ"],[1,1230,"$"]],[1229,1230],[1230,1230]]],[1513741947432,["toby.qin@CNSHHQ-0435",[[1,1296,"\n"]],[1294,1294],[1295,1295]]],[1513741948353,["toby.qin@CNSHHQ-0435",[[1,1297,"\n"]],[1294,1294],[1295,1295]]],[1513741949707,["toby.qin@CNSHHQ-0435",[[1,1295,"chang"]],[1295,1295],[1300,1300]]],[1513741950729,["toby.qin@CNSHHQ-0435",[[-1,1295,"chang"]],[1300,1300],[1295,1295]]],[1513741966117,["toby.qin@CNSHHQ-0435",[[1,1295,"尝试模拟点击屏幕，建设"]],[1295,1295],[1306,1306]]],[1513741966914,["toby.qin@CNSHHQ-0435",[[-1,1304,"建设"]],[1306,1306],[1304,1304]]],[1513741981564,["toby.qin@CNSHHQ-0435",[[1,1304,"你可以打开画图软件，"]],[1304,1304],[1314,1314]]],[1513741982869,["toby.qin@CNSHHQ-0435",[[1,1314,"模拟"]],[1314,1314],[1316,1316]]],[1513741984050,["toby.qin@CNSHHQ-0435",[[-1,1314,"模拟"]],[1316,1316],[1314,1314]]],[1513741993011,["toby.qin@CNSHHQ-0435",[[1,1314,"然后运行命令："]],[1314,1314],[1321,1321]]],[1513741993265,["toby.qin@CNSHHQ-0435",[[1,1324,"\n"]],[1321,1321],[1322,1322]]],[1513741994930,["toby.qin@CNSHHQ-0435",[[1,1322,"```"]],[1322,1322],[1325,1325]]],[1513741995202,["toby.qin@CNSHHQ-0435",[[1,1328,"\n"]],[1325,1325],[1326,1326]]],[1513741996067,["toby.qin@CNSHHQ-0435",[[1,1326,"```"]],[1326,1326],[1329,1329]]],[1513741996922,["toby.qin@CNSHHQ-0435",[[1,1326,"\n"]],[1325,1325],[1326,1326]]],[1513742010315,["toby.qin@CNSHHQ-0435",[[1,1326,"adb shell input tap x y "]],[1326,1326],[1350,1350]]],[1513742011985,["toby.qin@CNSHHQ-0435",[[-1,1346,"x y "]],[1350,1350],[1346,1346]]],[1513742014162,["toby.qin@CNSHHQ-0435",[[1,1346,"555"]],[1346,1346],[1349,1349]]],[1513742015194,["toby.qin@CNSHHQ-0435",[[-1,1347,"55"]],[1349,1349],[1347,1347]]],[1513742017068,["toby.qin@CNSHHQ-0435",[[1,1347,"00 500"]],[1347,1347],[1353,1353]]],[1513742023618,["toby.qin@CNSHHQ-0435",[[1,1322,"\n"]],[1321,1321],[1322,1322]]],[1513742028973,["toby.qin@CNSHHQ-0435",[[1,1359,"如果以前"]],[1359,1359],[1363,1363]]],[1513742029697,["toby.qin@CNSHHQ-0435",[[-1,1361,"以前"]],[1363,1363],[1361,1361]]],[1513742035692,["toby.qin@CNSHHQ-0435",[[1,1361,"如果一切就"]],[1361,1361],[1366,1366]]],[1513742035930,["toby.qin@CNSHHQ-0435",[[-1,1365,"就"]],[1366,1366],[1365,1365]]],[1513742037549,["toby.qin@CNSHHQ-0435",[[1,1365,"就绪"]],[1365,1365],[1367,1367]]],[1513742043394,["toby.qin@CNSHHQ-0435",[[-1,1363,"一切就绪"]],[1367,1367],[1363,1363]]],[1513742049573,["toby.qin@CNSHHQ-0435",[[1,1363,"一切OK，那么你讲看"]],[1363,1363],[1373,1373]]],[1513742050233,["toby.qin@CNSHHQ-0435",[[-1,1371,"讲看"]],[1373,1373],[1371,1371]]],[1513742058412,["toby.qin@CNSHHQ-0435",[[1,1371,"将看到画图软件"]],[1371,1371],[1378,1378]]],[1513742063068,["toby.qin@CNSHHQ-0435",[[1,1304,"比如"]],[1304,1304],[1306,1306]]],[1513742067041,["toby.qin@CNSHHQ-0435",[[-1,1295,"尝试"]],[1297,1297],[1295,1295]]],[1513742075284,["toby.qin@CNSHHQ-0435",[[1,1378,"在左边"]],[1378,1378],[1381,1381]]],[1513742075985,["toby.qin@CNSHHQ-0435",[[-1,1379,"左边"]],[1381,1381],[1379,1379]]],[1513742082355,["toby.qin@CNSHHQ-0435",[[1,1379,"坐标（500，"]],[1379,1379],[1386,1386]]],[1513742083302,["toby.qin@CNSHHQ-0435",[[-1,1385,"，"]],[1386,1386],[1385,1385]]],[1513742091507,["toby.qin@CNSHHQ-0435",[[1,1385,",500）的位置有一个点。"]],[1385,1385],[1398,1398]]],[1513742099937,["toby.qin@CNSHHQ-0435",[[1,1400,"\n"]],[1398,1398],[1399,1399]]],[1513742100305,["toby.qin@CNSHHQ-0435",[[1,1401,"\n"]],[1399,1399],[1400,1400]]],[1513742107550,["toby.qin@CNSHHQ-0435",[[1,1400,"### 代码实现"]],[1400,1400],[1408,1408]]],[1513742109849,["toby.qin@CNSHHQ-0435",[[1,1410,"\n"]],[1408,1408],[1409,1409]]],[1513742112537,["toby.qin@CNSHHQ-0435",[[1,1411,"\n"]],[1409,1409],[1410,1410]]],[1513742118780,["toby.qin@CNSHHQ-0435",[[1,1410,"刷金币的"]],[1410,1410],[1414,1414]]],[1513742125665,["toby.qin@CNSHHQ-0435",[[-1,1410,"刷金币的"]],[1414,1414],[1410,1410]]],[1513742127420,["toby.qin@CNSHHQ-0435",[[1,1410,"通过"]],[1410,1410],[1412,1412]]],[1513742128001,["toby.qin@CNSHHQ-0435",[[-1,1410,"通过"]],[1412,1412],[1410,1410]]],[1513742145661,["toby.qin@CNSHHQ-0435",[[1,1410,"通关需要点击的屏幕位置是固定的，我们只需要不到是"]],[1410,1410],[1434,1434]]],[1513742145906,["toby.qin@CNSHHQ-0435",[[-1,1433,"是"]],[1434,1434],[1433,1433]]],[1513742154190,["toby.qin@CNSHHQ-0435",[[1,1433,"10行代码就可以完成一个悬壶"]],[1433,1433],[1447,1447]]],[1513742154762,["toby.qin@CNSHHQ-0435",[[-1,1445,"悬壶"]],[1447,1447],[1445,1445]]],[1513742164174,["toby.qin@CNSHHQ-0435",[[1,1445,"来回"]],[1445,1445],[1447,1447]]],[1513742165346,["toby.qin@CNSHHQ-0435",[[-1,1443,"一个来回"]],[1447,1447],[1443,1443]]],[1513742166052,["toby.qin@CNSHHQ-0435",[[1,1443,"。"]],[1443,1443],[1444,1444]]],[1513742166330,["toby.qin@CNSHHQ-0435",[[1,1446,"\n"]],[1444,1444],[1445,1445]]],[1513742166834,["toby.qin@CNSHHQ-0435",[[1,1447,"\n"]],[1445,1445],[1446,1446]]],[1513742168700,["toby.qin@CNSHHQ-0435",[[1,1446,"```python"]],[1446,1446],[1455,1455]]],[1513742168979,["toby.qin@CNSHHQ-0435",[[1,1457,"\n"]],[1455,1455],[1456,1456]]],[1513742169484,["toby.qin@CNSHHQ-0435",[[1,1456,"```"]],[1456,1456],[1459,1459]]],[1513742171674,["toby.qin@CNSHHQ-0435",[[1,1456,"\n"]],[1455,1455],[1456,1456]]],[1513742194759,["toby.qin@CNSHHQ-0435",[[1,1456,"def tap_screen(x, y):\n  \"\"\"calculate real x, y according to device resolution.\"\"\"\n  base_x, base_y = 1920, 1080\n  real_x = int(x / base_x * device_x)\n    real_y = int(y / base_y * device_y)\n    os.system('adb shell input tap {} {}'.format(real_x, real_y))\n\ndef do_money_work():\n  if game_mode == 1:\n  logging.debug('#0 start the game')\n        tap_screen(1600, 970)\n        sleep(step_wait[0])\n\n    logging.debug('#1 ready, go!!!')\n    tap_screen(1450, 910)\n    sleep(step_wait[1])\n\n    logging.debug('#2 auto power on!')\n    tap_screen(1780, 40)\n\n    for i in range(step_wait[2]):\n  tap_screen(1000, 500)\n        sleep(1)\n\n    logging.debug('#3 do it again...\\n')\n    tap_screen(1430, 980)\n    sleep(step_wait[4])"]],[1456,1456],[2170,2170]]],[1513742216084,["toby.qin@CNSHHQ-0435",[[-1,1433,"1"]],[1434,1434],[1433,1433]]],[1513742216356,["toby.qin@CNSHHQ-0435",[[1,1433,"2"]],[1433,1433],[1434,1434]]],[1513742232717,["toby.qin@CNSHHQ-0435",[[-1,1836,"step_wait[0]"],[1,1848,"3"]],[1836,1848],[1837,1837]]],[1513742241637,["toby.qin@CNSHHQ-0435",[[-1,1913,"step_wait["],[-1,1924,"]"]],[1913,1925],[1914,1914]]],[1513742241812,["toby.qin@CNSHHQ-0435",[[1,1914,"0"]],[1914,1914],[1915,1915]]],[1513742245507,["toby.qin@CNSHHQ-0435",[[-1,1914,"0"]],[1913,1915],[1914,1914]]],[1513742245621,["toby.qin@CNSHHQ-0435",[[1,1914,"58"]],[1914,1914],[1916,1916]]],[1513742246795,["toby.qin@CNSHHQ-0435",[[-1,1915,"8"]],[1916,1916],[1915,1915]]],[1513742282067,["toby.qin@CNSHHQ-0435",[[-1,1840,"    "],[-1,1877,"    "],[-1,1903,"    "]],[1840,1916],[1840,1904]]],[1513742283451,["toby.qin@CNSHHQ-0435",[[1,1840,"\t"],[1,1873,"\t"],[1,1895,"\t"]],[1840,1904],[1840,1907]]]]]]}